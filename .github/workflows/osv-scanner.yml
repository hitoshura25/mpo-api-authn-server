name: OSV-Scanner Vulnerability Scan

on:
  pull_request:
    branches: [ main, develop ]
  push:
    branches: [ main ]

permissions:
  actions: read
  security-events: write
  contents: read

jobs:
  scan-pr:
    uses: "google/osv-scanner-action/.github/workflows/osv-scanner-reusable-pr.yml@v2.2.1"
    with:
      # Upload SARIF results to GitHub Security tab
      upload-sarif: true
      # Do not fail the workflow on vulnerabilities to avoid blocking development
      fail-on-vuln: false
      # Additional scan arguments for comprehensive coverage
      scan-args: |
        --recursive
        --call-analysis=all
